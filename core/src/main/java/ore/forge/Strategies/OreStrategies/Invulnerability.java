package ore.forge.Strategies.OreStrategies;

import ore.forge.Ore;

//@author Nathan Ulmen
public class Invulnerability implements OreStrategy {
    private int charges;
    private float duration;

    public Invulnerability(int charges, float duration) {
        this.charges = charges;
        this.duration = duration;
    }


    public Invulnerability(Invulnerability clone) {
        this.charges = clone.charges;
        this.duration = clone.duration;
    }

    @Override
    public void activate(float deltaT, Ore ore) {
        duration -= deltaT;
        if(charges > 0 && duration >= 0 && ore.isDying()) {
            ore.setIsDying(false);
            charges--;
        }
        if (charges <= 0 || duration <= 0) {
            ore.removeEffect(this);
        }
    }

    @Override
    public OreStrategy clone() {
        return new Invulnerability(this);
    }

    @Override
    public boolean isEndStepEffect() {
        return true;
    }

    @Override
    public String toString() {
        return this.getClass().getSimpleName() + "\tDuration: " + duration + "\tCharges: " + charges;
    }
}
